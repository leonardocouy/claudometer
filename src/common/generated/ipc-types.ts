// @generated
// This file is generated by `cargo run --manifest-path src-tauri/Cargo.toml --bin generate_ipc_types`.
// Do not edit manually.

export type UsageStatus = 'ok' | 'unauthorized' | 'rate_limited' | 'error' | 'missing_key';

export type UsageSource = 'web' | 'cli';

export type CodexUsageSource = 'oauth' | 'cli';

export type ClaudeModelUsage = { name: string; percent: number; resetsAt: string | null };

export type ClaudeUsageSnapshot =
  | {
      status: 'ok';
      organizationId: string;
      sessionPercent: number;
      sessionResetsAt: string | null;
      weeklyPercent: number;
      weeklyResetsAt: string | null;
      models: Array<ClaudeModelUsage>;
      lastUpdatedAt: string;
    }
  | {
      status: 'unauthorized';
      organizationId: string | null;
      lastUpdatedAt: string;
      errorMessage: string | null;
    }
  | {
      status: 'rate_limited';
      organizationId: string | null;
      lastUpdatedAt: string;
      errorMessage: string | null;
    }
  | {
      status: 'error';
      organizationId: string | null;
      lastUpdatedAt: string;
      errorMessage: string | null;
    }
  | {
      status: 'missing_key';
      organizationId: string | null;
      lastUpdatedAt: string;
      errorMessage: string | null;
    };

export type CodexUsageSnapshot =
  | {
      status: 'ok';
      sessionPercent: number;
      sessionResetsAt: string | null;
      weeklyPercent: number;
      weeklyResetsAt: string | null;
      lastUpdatedAt: string;
    }
  | { status: 'unauthorized'; lastUpdatedAt: string; errorMessage: string | null }
  | { status: 'rate_limited'; lastUpdatedAt: string; errorMessage: string | null }
  | { status: 'error'; lastUpdatedAt: string; errorMessage: string | null }
  | { status: 'missing_key'; lastUpdatedAt: string; errorMessage: string | null };

export type UsageSnapshotBundle = {
  claude: ClaudeUsageSnapshot | null;
  codex: CodexUsageSnapshot | null;
};

export type ClaudeOrganization = { id: string; name: string | null };

export type SettingsState = {
  trackClaudeEnabled: boolean;
  trackCodexEnabled: boolean;
  usageSource: UsageSource;
  rememberSessionKey: boolean;
  codexUsageSource: CodexUsageSource;
  refreshIntervalSeconds: number;
  notifyOnUsageReset: boolean;
  autostartEnabled: boolean;
  checkUpdatesOnStartup: boolean;
  organizations: Array<ClaudeOrganization>;
  selectedOrganizationId: string | null;
  latestSnapshot: UsageSnapshotBundle | null;
  keyringAvailable: boolean;
};

export type SaveSettingsPayload = {
  trackClaudeEnabled: boolean;
  trackCodexEnabled: boolean;
  usageSource: UsageSource;
  sessionKey: string | null;
  rememberSessionKey: boolean;
  codexUsageSource: CodexUsageSource;
  refreshIntervalSeconds: number;
  notifyOnUsageReset: boolean;
  autostartEnabled: boolean;
  checkUpdatesOnStartup: boolean;
  selectedOrganizationId: string | null;
};

export type IpcErrorCode =
  | 'VALIDATION'
  | 'NETWORK'
  | 'UNAUTHORIZED'
  | 'RATE_LIMITED'
  | 'KEYRING'
  | 'UPDATER'
  | 'UNKNOWN';

export type IpcError = { code: IpcErrorCode; message: string };

export type IpcResult<T> = { ok: boolean; value: T } | { ok: boolean; error: IpcError };
